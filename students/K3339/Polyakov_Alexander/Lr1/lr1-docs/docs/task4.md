# Задача 4 - Многопоточный чат-сервер

## Цель

Реализация многопоточного чат-сервера с поддержкой множественных клиентов, демонстрация работы с потоками, синхронизацией данных и реальным временем обмена сообщениями.

## Выполненная работа

Был создан сервер, который создает отдельный поток для каждого подключенного клиента, используя daemon потоки для автоматического завершения. 

Ключевая особенность реализации - синхронизация доступа к общему словарю клиентов:

```python
clients = {}
clients_lock = threading.Lock()

def broadcast_json(obj: dict, exclude: socket.socket | None = None):
    with clients_lock:
        conns = list(clients.keys())
    for c in conns:
        if c is exclude:
            continue
        send_json(c, obj)
```

Клиенты обмениваются сообщениями в формате JSON через NDJSON протокол. Реализованы регистрация пользователей, трансляция сообщений и защита от спуфинга имен.

## Результат

Успешно создан многопоточный чат-сервер. Изучены принципы многопоточного программирования, необходимость синхронизации общих данных через блокировки и особенности архитектуры клиент-серверных приложений с множественными соединениями.